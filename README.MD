# üßæ Sistema de Registro de Asistencia con C√≥digo QR

## üîç Descripci√≥n

Este sistema permite a docentes generar c√≥digos QR para registrar la asistencia de sus alumnos de forma geolocalizada. Est√° desarrollado en Node.js (backend) y React (frontend), y utiliza una base de datos relacional para el almacenamiento.

## üì¶ Estructura del Proyecto

FALTA LA ESTRUCTURA DEL PROYECTO


## üöÄ Instalaci√≥n y Ejecuci√≥n

### Backend
```bash
cd backend
npm install
npm run dev
### Frontend
```bash
cd frontend
npm install
npm run start

üìã Funcionalidades

Login docente

Generaci√≥n de clases y c√≥digos QR

Registro de asistencia por escaneo

Validaci√≥n por geolocalizaci√≥n

Exportaci√≥n a Excel

üë• Roles

Docente (autenticado)

Alumno (no autenticado)

# Documentaci√≥n API - Sistema de Asistencia QR

## Base URL
`http://localhost:5000/api`

## Autenticaci√≥n
La API utiliza autenticaci√≥n basada en JWT (JSON Web Tokens). Para acceder a los endpoints protegidos, se debe incluir el token en la cabecera de autorizaci√≥n:

```
Authorization: Bearer <token>
```

## Endpoints

### Autenticaci√≥n

#### Iniciar sesi√≥n
- **URL**: `/auth/login`
- **M√©todo**: `POST`
- **Autenticaci√≥n**: No requerida
- **Par√°metros de cuerpo**:
  ```json
  {
    "usuario": "string",
    "contrasena": "string"
  }
  ```
- **Respuesta exitosa**:
  ```json
  {
    "message": "Inicio de sesi√≥n exitoso",
    "docente": {
      "id": "number",
      "usuario": "string",
      "nombre": "string",
      "apellido": "string",
      "email": "string"
    },
    "token": "string"
  }
  ```
- **C√≥digos de respuesta**:
  - `200 OK`: Inicio de sesi√≥n exitoso
  - `400 Bad Request`: Datos de entrada inv√°lidos
  - `401 Unauthorized`: Credenciales inv√°lidas

#### Verificar autenticaci√≥n
- **URL**: `/auth/check`
- **M√©todo**: `GET`
- **Autenticaci√≥n**: Requerida
- **Respuesta exitosa**:
  ```json
  {
    "message": "Sesi√≥n v√°lida",
    "docente": {
      "id": "number",
      "usuario": "string",
      "nombre": "string",
      "apellido": "string",
      "email": "string"
    }
  }
  ```
- **C√≥digos de respuesta**:
  - `200 OK`: Sesi√≥n v√°lida
  - `401 Unauthorized`: Token inv√°lido o expirado
  - `404 Not Found`: Docente no encontrado

### Docentes

#### Obtener todos los docentes
- **URL**: `/docentes`
- **M√©todo**: `GET`
- **Autenticaci√≥n**: Requerida
- **Respuesta exitosa**:
  ```json
  {
    "message": "Docentes obtenidos correctamente",
    "data": [
      {
        "id_docente": "number",
        "usuario": "string",
        "nombre": "string",
        "apellido": "string",
        "email": "string",
        "estado": "boolean",
        "createdAt": "date",
        "updatedAt": "date"
      }
    ]
  }
  ```
- **C√≥digos de respuesta**:
  - `200 OK`: Respuesta exitosa
  - `401 Unauthorized`: No autenticado
  - `500 Internal Server Error`: Error en el servidor

#### Obtener docente por ID
- **URL**: `/docentes/:id`
- **M√©todo**: `GET`
- **Autenticaci√≥n**: Requerida
- **Par√°metros de ruta**:
  - `id`: ID del docente
- **Respuesta exitosa**:
  ```json
  {
    "message": "Docente obtenido correctamente",
    "data": {
      "id_docente": "number",
      "usuario": "string",
      "nombre": "string",
      "apellido": "string",
      "email": "string",
      "estado": "boolean",
      "createdAt": "date",
      "updatedAt": "date"
    }
  }
  ```
- **C√≥digos de respuesta**:
  - `200 OK`: Respuesta exitosa
  - `401 Unauthorized`: No autenticado
  - `404 Not Found`: Docente no encontrado
  - `500 Internal Server Error`: Error en el servidor

#### Crear docente
- **URL**: `/docentes`
- **M√©todo**: `POST`
- **Autenticaci√≥n**: Requerida
- **Par√°metros de cuerpo**:
  ```json
  {
    "usuario": "string",
    "contrasena": "string",
    "nombre": "string",
    "apellido": "string",
    "email": "string"
  }
  ```
- **Respuesta exitosa**:
  ```json
  {
    "message": "Docente creado correctamente",
    "data": {
      "id_docente": "number",
      "usuario": "string",
      "nombre": "string",
      "apellido": "string",
      "email": "string",
      "estado": "boolean",
      "createdAt": "date",
      "updatedAt": "date"
    }
  }
  ```
- **C√≥digos de respuesta**:
  - `201 Created`: Docente creado
  - `400 Bad Request`: Datos inv√°lidos o usuario/email ya existe
  - `401 Unauthorized`: No autenticado
  - `500 Internal Server Error`: Error en el servidor

#### Actualizar docente
- **URL**: `/docentes/:id`
- **M√©todo**: `PUT`
- **Autenticaci√≥n**: Requerida
- **Par√°metros de ruta**:
  - `id`: ID del docente
- **Par√°metros de cuerpo** (todos opcionales):
  ```json
  {
    "nombre": "string",
    "apellido": "string",
    "email": "string",
    "contrasena": "string"
  }
  ```
- **Respuesta exitosa**:
  ```json
  {
    "message": "Docente actualizado correctamente",
    "data": {
      "id_docente": "number",
      "usuario": "string",
      "nombre": "string",
      "apellido": "string",
      "email": "string",
      "estado": "boolean",
      "createdAt": "date",
      "updatedAt": "date"
    }
  }
  ```
- **C√≥digos de respuesta**:
  - `200 OK`: Docente actualizado
  - `401 Unauthorized`: No autenticado
  - `404 Not Found`: Docente no encontrado
  - `500 Internal Server Error`: Error en el servidor

#### Eliminar docente (soft delete)
- **URL**: `/docentes/:id`
- **M√©todo**: `DELETE`
- **Autenticaci√≥n**: Requerida
- **Par√°metros de ruta**:
  - `id`: ID del docente
- **Respuesta exitosa**:
  ```json
  {
    "message": "Docente desactivado correctamente"
  }
  ```
- **C√≥digos de respuesta**:
  - `200 OK`: Docente desactivado
  - `401 Unauthorized`: No autenticado
  - `404 Not Found`: Docente no encontrado
  - `500 Internal Server Error`: Error en el servidor

## Modelos de datos

### Docente
```json
{
  "id_docente": "number (clave primaria, autoincremental)",
  "usuario": "string (√∫nico)",
  "contrasena": "string (encriptada con argon2)",
  "nombre": "string",
  "apellido": "string",
  "email": "string (√∫nico)",
  "estado": "boolean (default: true)",
  "createdAt": "date",
  "updatedAt": "date"
}
```

### Clase
```json
{
  "id_clase": "number (clave primaria, autoincremental)",
  "id_docente": "number (clave for√°nea ‚Üí Docente.id_docente)",
  "ubicacion_latitud": "decimal(10,8)",
  "ubicacion_longitud": "decimal(11,8)",
  "fecha_creacion": "date",
  "titulo": "string",
  "descripcion": "text",
  "estado": "boolean (default: true)",
  "createdAt": "date",
  "updatedAt": "date"
}
```

### Asistencia
```json
{
  "id_asistencia": "number (clave primaria, autoincremental)",
  "id_clase": "number (clave for√°nea ‚Üí Clase.id_clase)",
  "legajo_alumno": "string",
  "nombre_alumno": "string",
  "apellido_alumno": "string",
  "dni_alumno": "string",
  "fecha_hora_asistencia": "date",
  "ubicacion_alumno_latitud": "decimal(10,8)",
  "ubicacion_alumno_longitud": "decimal(11,8)",
  "distancia_al_aula": "decimal(10,2)",
  "createdAt": "date",
  "updatedAt": "date"
}
```

## Notas sobre validaci√≥n de datos

- Los campos requeridos se validan en el servidor
- Las contrase√±as se encriptan con argon2 antes de almacenarse
- Los campos de email se validan con un formato correcto
- Se verifica la unicidad de usuario y email antes de crear un docente